# Wuhr AI Ops å®‰è£…æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

Wuhr AI Ops æä¾›äº†ä¸¤ä¸ªä¸“é—¨çš„å®‰è£…è„šæœ¬æ¥é€‚åº”ä¸åŒçš„ç½‘ç»œç¯å¢ƒï¼š

1. **`install-zh.sh`** - å›½å†…ç¯å¢ƒä¸“ç”¨è„šæœ¬ï¼ˆä¸­æ–‡ï¼‰
2. **`install-en.sh`** - å›½å¤–ç¯å¢ƒä¸“ç”¨è„šæœ¬ï¼ˆè‹±æ–‡ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å…‹éš†éƒ¨ç½²

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/st-lzh/wuhr-ai-ops.git
cd wuhr-ai-ops

# å›½å†…ç”¨æˆ·ä½¿ç”¨ä¸­æ–‡å®‰è£…è„šæœ¬
./install-zh.sh

# å›½å¤–ç”¨æˆ·ä½¿ç”¨è‹±æ–‡å®‰è£…è„šæœ¬
./install-en.sh
```

## ğŸ“– è„šæœ¬è¯¦ç»†è¯´æ˜

### 1. install-zh.sh - å›½å†…ç¯å¢ƒä¸“ç”¨å®‰è£…è„šæœ¬

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- ğŸ‡¨ğŸ‡³ ä¸“ä¸ºä¸­å›½å¤§é™†ç½‘ç»œç¯å¢ƒä¼˜åŒ–
- ğŸš€ è‡ªåŠ¨é…ç½®å›½å†…é•œåƒæº
- ğŸ“¦ è‡ªåŠ¨ä¸‹è½½ kubelet-wuhrai
- ğŸ”§ ä¼˜åŒ–Dockeré•œåƒæºé…ç½®
- âš¡ æå‡ä¸‹è½½å’Œå®‰è£…é€Ÿåº¦
- ğŸ¤– è‡ªåŠ¨åˆå§‹åŒ–16ä¸ªä¸»æµAIæ¨¡å‹é¢„è®¾

**å›½å†…é•œåƒæºé…ç½®ï¼š**
- **npm**: https://registry.npmmirror.com/
- **Docker**: é˜¿é‡Œäº‘ã€ç½‘æ˜“ã€ç™¾åº¦é•œåƒæº
- **Node.js**: å›½å†…NodeSourceé•œåƒ

**kubelet-wuhrai ä¸‹è½½æºï¼š**
1. é˜¿é‡Œäº‘OSSï¼ˆä¸»è¦ï¼‰
2. GitHub Releasesï¼ˆå¤‡ç”¨ï¼‰
3. Gitee Releasesï¼ˆå¤‡ç”¨ï¼‰

**é€‚ç”¨åœºæ™¯ï¼š**
- ä¸­å›½å¤§é™†ç½‘ç»œç¯å¢ƒ
- éœ€è¦å¿«é€Ÿä¸‹è½½ä¾èµ–åŒ…
- å¸Œæœ›ä½¿ç”¨å›½å†…é•œåƒæº

### 2. install-en.sh - å›½å¤–ç¯å¢ƒä¸“ç”¨å®‰è£…è„šæœ¬

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- ğŸŒ é€‚ç”¨äºå…¨çƒç½‘ç»œç¯å¢ƒ
- ğŸ”§ ä½¿ç”¨å®˜æ–¹æºå’Œæ ‡å‡†é…ç½®
- ğŸ›¡ï¸ å¢å¼ºçš„é”™è¯¯å¤„ç†
- ğŸ“Š ç«¯å£å†²çªæ£€æµ‹
- ğŸ” DockeræœåŠ¡çŠ¶æ€æ£€æŸ¥
- ğŸ¤– è‡ªåŠ¨åˆå§‹åŒ–16ä¸ªä¸»æµAIæ¨¡å‹é¢„è®¾

**å®˜æ–¹æºé…ç½®ï¼š**
- **npm**: https://registry.npmjs.org/
- **Docker**: å®˜æ–¹Docker Hub
- **Node.js**: å®˜æ–¹NodeSource

**é€‚ç”¨åœºæ™¯ï¼š**
- æµ·å¤–ç½‘ç»œç¯å¢ƒ
- å¸Œæœ›ä½¿ç”¨å®˜æ–¹æº
- ç½‘ç»œè¿æ¥ç¨³å®š

**æ–°å¢åŠŸèƒ½ï¼š**
- ç«¯å£å ç”¨æ£€æµ‹
- DockeræœåŠ¡çŠ¶æ€ç›‘æ§
- æ”¹è¿›çš„ç½‘ç»œä¿¡æ¯è·å–
- æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

**é€‚ç”¨åœºæ™¯ï¼š**
- æµ·å¤–ç½‘ç»œç¯å¢ƒ
- éœ€è¦ç¨³å®šå¯é çš„å®‰è£…
- å¯¹ç½‘ç»œé€Ÿåº¦è¦æ±‚ä¸é«˜

## ğŸ”§ ç³»ç»Ÿè¦æ±‚

### åŸºç¡€è¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Linux (Ubuntu 18.04+, CentOS 7+, Fedora) / macOS 10.15+
- **å†…å­˜**: æœ€å°‘ 4GBï¼Œæ¨è 8GB+
- **ç£ç›˜ç©ºé—´**: æœ€å°‘ 10GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

### è½¯ä»¶è¦æ±‚
- **Docker**: >= 20.10.0
- **Docker Compose**: >= 2.0.0
- **Node.js**: >= 18.0.0
- **npm**: >= 8.0.0

## ğŸ“¦ å®‰è£…æµç¨‹

### 1. ç¯å¢ƒæ£€æŸ¥
- æ£€æµ‹æ“ä½œç³»ç»Ÿç±»å‹
- éªŒè¯ç½‘ç»œè¿æ¥
- æ£€æŸ¥å¿…è¦å·¥å…·æ˜¯å¦å®‰è£…

### 2. ç¯å¢ƒå®‰è£…ï¼ˆå¦‚éœ€è¦ï¼‰
- è‡ªåŠ¨å®‰è£…ç¼ºå¤±çš„Docker
- è‡ªåŠ¨å®‰è£…ç¼ºå¤±çš„Node.js
- é…ç½®ç›¸åº”çš„é•œåƒæº

### 3. é¡¹ç›®é…ç½®
- æ£€æŸ¥é¡¹ç›®æ–‡ä»¶å®Œæ•´æ€§
- åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶
- é…ç½®npmæº

### 4. æœåŠ¡å¯åŠ¨
- å¯åŠ¨Dockerå®¹å™¨ï¼ˆPostgreSQLã€Redisã€pgAdminï¼‰
- ç­‰å¾…æ•°æ®åº“æœåŠ¡å°±ç»ª

### 5. æ•°æ®åº“åˆå§‹åŒ–
- é‡ç½®å’ŒåŒæ­¥æ•°æ®åº“æ¶æ„
- ç”ŸæˆPrismaå®¢æˆ·ç«¯
- éªŒè¯æ•°æ®åº“è¿æ¥

### 6. ç”¨æˆ·å’Œæƒé™åˆå§‹åŒ–
- åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·ï¼ˆadmin@wuhr.aiï¼‰
- åˆå§‹åŒ–æƒé™ç³»ç»Ÿ
- è®¾ç½®ç”¨æˆ·è§’è‰²å’Œæƒé™

### 7. é¢„è®¾æ¨¡å‹åˆå§‹åŒ–
- åˆå§‹åŒ–17ä¸ªä¸»æµAIæ¨¡å‹é¢„è®¾
- åŒ…å«OpenAIã€DeepSeekã€Geminiã€Qwenã€Doubaoç­‰
- æ”¯æŒå¤šç§åŠŸèƒ½ç‰¹æ€§æ ‡è®°

### 8. åº”ç”¨éƒ¨ç½²
- å®‰è£…Node.jsä¾èµ–
- æ„å»ºåº”ç”¨
- å¯åŠ¨WebæœåŠ¡å™¨

### 9. æœåŠ¡éªŒè¯
- éªŒè¯åº”ç”¨å¯åŠ¨çŠ¶æ€
- æ£€æŸ¥ç«¯å£å¯ç”¨æ€§
- ç¡®è®¤æœåŠ¡æ­£å¸¸è¿è¡Œ

## ğŸŒ è®¿é—®ä¿¡æ¯

å®‰è£…å®Œæˆåï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š

### ä¸»åº”ç”¨
- **å†…ç½‘è®¿é—®**: http://[å†…ç½‘IP]:3000
- **å¤–ç½‘è®¿é—®**: http://[å¤–ç½‘IP]:3000

### æ•°æ®åº“ç®¡ç†
- **pgAdmin**: http://[IP]:5050
  - é‚®ç®±: admin@wuhrai.com
  - å¯†ç : admin_password_2024

### é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·
- **ç”¨æˆ·å**: admin
- **é‚®ç®±**: admin@wuhr.ai
- **å¯†ç **: Admin123!

## ğŸ”§ æ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤

å¦‚æœæ‚¨éœ€è¦æ‰‹åŠ¨éƒ¨ç½²æˆ–äº†è§£è¯¦ç»†çš„å®‰è£…è¿‡ç¨‹ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/st-lzh/wuhr-ai-ops.git
cd wuhr-ai-ops

# ç¡®ä¿å®‰è£…äº†å¿…è¦çš„å·¥å…·
sudo apt update
sudo apt install -y curl wget git
```

### 2. å®‰è£…Dockerå’ŒDocker Compose
```bash
# å®‰è£…Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# å®‰è£…Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# å¯åŠ¨DockeræœåŠ¡
sudo systemctl start docker
sudo systemctl enable docker
```

### 3. å®‰è£…Node.js
```bash
# å®‰è£…Node.js 18+
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# éªŒè¯å®‰è£…
node --version
npm --version
```

### 4. å¯åŠ¨æ•°æ®åº“æœåŠ¡
```bash
# å¯åŠ¨Dockerå®¹å™¨
docker-compose up -d postgres redis pgadmin

# ç­‰å¾…æœåŠ¡å¯åŠ¨
sleep 30

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps
```

### 5. å®‰è£…é¡¹ç›®ä¾èµ–
```bash
# å®‰è£…npmä¾èµ–
npm install

# æ¸…ç†npmç¼“å­˜ï¼ˆå¯é€‰ï¼‰
npm cache clean --force
```

### 6. æ•°æ®åº“åˆå§‹åŒ–
```bash
# é‡ç½®æ•°æ®åº“æ¶æ„
npx prisma migrate reset --force

# ç”ŸæˆPrismaå®¢æˆ·ç«¯
npx prisma generate

# éªŒè¯æ•°æ®åº“è¿æ¥
npx prisma db push
```

### 7. åˆå§‹åŒ–ç”¨æˆ·å’Œæƒé™
```bash
# åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·
node scripts/ensure-admin-user.js

# åˆå§‹åŒ–æƒé™ç³»ç»Ÿ
node scripts/init-permissions.js

# åˆå§‹åŒ–è¶…çº§ç®¡ç†å‘˜
node scripts/init-super-admin.ts
```

### 8. åˆå§‹åŒ–é¢„è®¾æ¨¡å‹
```bash
# åˆå§‹åŒ–é¢„è®¾æ¨¡å‹æ•°æ®
node scripts/init-preset-models.js
```

### 9. æ„å»ºå’Œå¯åŠ¨åº”ç”¨
```bash
# æ„å»ºåº”ç”¨
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm start

# æˆ–è€…å¯åŠ¨å¼€å‘æ¨¡å¼
npm run dev
```

### 10. éªŒè¯éƒ¨ç½²
```bash
# æ£€æŸ¥åº”ç”¨çŠ¶æ€
curl http://localhost:3000

# æ£€æŸ¥æ•°æ®åº“è¿æ¥
curl http://localhost:5050

# æŸ¥çœ‹æ—¥å¿—
tail -f app.log
```

## ğŸ” æ•…éšœæ’é™¤

#### 1. ç«¯å£å†²çª
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep :3000

# åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹
sudo kill -9 [è¿›ç¨‹ID]
```

#### 2. DockeræœåŠ¡é—®é¢˜
```bash
# æ£€æŸ¥DockerçŠ¶æ€
sudo systemctl status docker

# é‡å¯DockeræœåŠ¡
sudo systemctl restart docker
```

#### 3. ç½‘ç»œè¿æ¥é—®é¢˜
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping www.baidu.com

# æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
sudo ufw status
sudo ufw allow 3000
```

#### 4. æƒé™é—®é¢˜
```bash
# æ·»åŠ ç”¨æˆ·åˆ°dockerç»„
sudo usermod -aG docker $USER

# é‡æ–°ç™»å½•æˆ–è¿è¡Œ
newgrp docker
```

### æ—¥å¿—æŸ¥çœ‹

```bash
# åº”ç”¨æ—¥å¿—
tail -f app.log

# Dockerå®¹å™¨æ—¥å¿—
docker-compose logs

# ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs postgres
docker-compose logs redis
```

### é‡ç½®å®‰è£…

```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down

# æ¸…ç†æ•°æ®å·
docker-compose down -v

# åˆ é™¤node_modules
rm -rf node_modules

# é‡æ–°è¿è¡Œå®‰è£…è„šæœ¬ï¼ˆæ ¹æ®æ‚¨çš„ç½‘ç»œç¯å¢ƒé€‰æ‹©ï¼‰
./install-zh.sh  # å›½å†…ç”¨æˆ·
# æˆ–
./install-en.sh  # å›½å¤–ç”¨æˆ·
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥é¡¹ç›®æ—¥å¿—æ–‡ä»¶
3. è”ç³»æŠ€æœ¯æ”¯æŒï¼š1139804291@qq.com

## ğŸ”„ æ›´æ–°è¯´æ˜

### v2.1.0 æ›´æ–°å†…å®¹
- âœ… é‡æ„ä¸ºåŒè„šæœ¬æ¶æ„ï¼ˆinstall-zh.sh / install-en.shï¼‰
- âœ… ç§»é™¤æ™ºèƒ½é€‰æ‹©å™¨ï¼Œç®€åŒ–éƒ¨ç½²æµç¨‹
- âœ… æ–°å¢kubelet-wuhraiè‡ªåŠ¨éƒ¨ç½²åŠŸèƒ½
- âœ… æ–°å¢æ™ºèƒ½K8s/Linuxæ¨¡å¼è¯†åˆ«
- âœ… è‡ªåŠ¨åˆå§‹åŒ–16ä¸ªä¸»æµAIæ¨¡å‹é¢„è®¾
- âœ… æ”¹è¿›é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- âœ… ä¼˜åŒ–ç½‘ç»œä¿¡æ¯è·å–å’Œæ˜¾ç¤º
- âœ… å¢å¼ºDockeræœåŠ¡çŠ¶æ€æ£€æŸ¥

---

**ä½œè€…**: st-lzh  
**é‚®ç®±**: 1139804291@qq.com  
**é¡¹ç›®åœ°å€**: https://github.com/st-lzh/wuhr-ai-ops 